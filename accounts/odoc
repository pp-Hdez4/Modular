def nuevoUsuario(request):
    data = {
        'form' : usuarioForm1()
    }
    patron_alumnos = r'^[a-zA-Z0-9._%+-]+@alumnos\.udg\.mx$'
    patron_academicos = r'^[a-zA-Z0-9._%+-]+@academicos\.udg\.mx$'
    
    if request.method == 'POST':
        regex = re.compile(patron_alumnos) #verificar si correo es de alumnos
        regex2 = re.compile(patron_academicos) #verificar si correo es de academicos

        if regex.match(request.POST.get('correo')):

            formulario = usuarioForm1(request.POST)
            if formulario.is_valid():

                dato = formulario.cleaned_data
                dato['rol'] = 1
                objeto = Usuario.objects.create(**dato)

                request.session['codigo_udg'] = objeto.codigo_udg
                request.session['nombre'] = objeto.nombre

                return redirect('perfilestudiante')
                #data['mensaje'] = "Correo valido alumnos"

        elif regex2.match(request.POST.get('correo')): #verificar si es correo de academicos 
            #data['mensaje'] = "Correo valido academicos"
            datos_user = {
                'correo' : request.POST.get('correo'),
                'password' : request.POST.get('password'),
                'activo' : True,
                'rol' : 2, #tutor
                'perfil' : False,
            }

        else:
            data['mensaje'] = "Correo no valido"

    return render(request, 'accounts/register.html', data)